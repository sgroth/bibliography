% !TEX TS-program = pdflatexmk
\documentclass[]{article}

\RequirePackage[l2tabu, orthodox]{nag}

\usepackage[ngerman]{babel} 
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

% Fonts and Typography
\usepackage[osf]{ebgaramond} % Garamond for rm
\usepackage[osf]{sourcesanspro} % SourceSansPro for ss
\usepackage[scaled=0.9]{beramono} % SourceCodePro for tt
\usepackage{microtype}
\usepackage[autostyle=true,german=quotes]{csquotes}
\usepackage[dvipsnames]{xcolor}
\usepackage[]{hyperref}
\renewcommand\UrlFont{\rmfamily}

\hypersetup{
  colorlinks=true,
  urlcolor=Blue
}

%--------------------
\clubpenalty = 20000 
\widowpenalty = 20000 
\displaywidowpenalty = 20000
%--------------------

% Version Control
\usepackage{gitfile-info}

% Headers and Footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\fancyhead{}
\fancyfoot{}
\rfoot{\thepage}
\lfoot{\textcolor{gray}{{\footnotesize\texttt{Version \gfiGetCommitAbr, \gfiGetYear--\gfiGetMonth--\gfiGetDay, \href{https://github.com/sgroth/bibliography}{https://github.com/sgroth/bibliography}}}}} % adds version control information

% Bibliography
\usepackage[authordate,notes,backend=biber,isbn=false,annotation,firstinits=false,defernumbers=true,sorting=ydnt]{biblatex-chicago}
\makeatletter
\AtEveryBibitem{
  \global\undef\bbx@lasthash}
\makeatother
\defbibfilter{papers}{
  type=article or
  type=incollection
}

\addbibresource{sgroth-bibliography.bib}
% \addbibresource{sgroth-unpublished.bib}

\DeclareFieldFormat{labelnumberwidth}{}
\setlength{\biblabelsep}{0pt}
\DeclareFieldFormat{annotation}{{#1}}

\begin{document}

\title{Publikations- und Vortragsverzeichnis}
\author{Dr. Stefan Groth\\\footnotesize{\texttt{\href{https://www.stefangroth.com}{https://www.stefangroth.com}}}}
\date{Version: \href{https://github.com/sgroth/bibliography}{\gfiGetCommitAbr}, \gfiGetYear--\gfiGetMonth--\gfiGetDay}

\maketitle

\nocite{*} % includes all entries from my personal bibliography

% Print segmented bibliographies
%\printbibliography[keyword=provisional,title={Provisional}] % Section to test provisional entries
\printbibliography[type=book,notkeyword=submitted,notkeyword=inpreparation,notkeyword=miszelle,keyword=monography,title={Monographien}]
\printbibliography[type=book,notkeyword=miszelle,keyword=editedvolume,title={Herausgeberschaften}]
\printbibliography[keyword=specialissue,notkeyword=inpreparation,title={Sondernummern von Zeitschriften}]
\printbibliography[filter=papers,notkeyword=inpreparation,notkeyword=miszelle,notkeyword=notaccepted,title={Aufs\"atze}]
% \printbibliography[type=incollection,notkeyword=submitted,notkeyword=inpreparation,notkeyword=miszelle,title={Aufs\"atze in Sammelb\"anden}]
\printbibliography[keyword=miszelle,notkeyword=inpreparation,title={Miszellen und graue Literatur}]
\printbibliography[notkeyword=inpreparation,keyword=notaccepted,title={Eingereichte Beitr\"age}]
\printbibliography[keyword=notaccepted,keyword=inpreparation,title={Beitr\"age in Vorbereitung}]
\printbibliography[type=review,notkeyword=notaccepted,notkeyword=inpreparation,notkeyword=miszelle,title={Rezensionen}]

%--------------------
\input{cv/presentations}
%--------------------

\end{document}
